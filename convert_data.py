data = {
  "nodes": {
    "isRoot": True,
    "id": "Root",
    "text": "Центральная тема",
    "endpoints": [
      {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
      {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
    ],
    "children": [
      {
        "id": "subNode1",
        "text": "Основная тема 1",
        "side": "left",
        "endpoints": [
          {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
          {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
        ],
        "children": [
          {
            "id": "subNode1-1",
            "text": "Подтема 1-1",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
          {
            "id": "subNode1-2",
            "text": "Подтема 1-2",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode1-2-1",
                "text": "Подтема 1-2-1",
                "side": "left",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "left",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              }
            ],
          },
          {
            "id": "subNode1-3",
            "text": "Подтема 1-3",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
        ],
      },
      {
        "id": "subNode2",
        "text": "Основная тема 2",
        "side": "left",
        "endpoints": [
          {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
          {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
        ],
        "children": [
          {
            "id": "subNode2-1",
            "text": "Подтема 2-1",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode2-1-1",
                "text": "Подтема 2-1-1",
                "side": "left",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              }
            ],
          },
          {
            "id": "subNode2-2",
            "text": "Подтема 2-2",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
          {
            "id": "subNode2-3",
            "text": "Подтема 2-3",
            "side": "left",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode2-3-1",
                "text": "Подтема 2-3-1",
                "side": "left",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              }
            ],
          },
        ],
      },
      {
        "id": "subNode3",
        "text": "Основная тема 3",
        "side": "left",
        "endpoints": [
          {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
          {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
        ],
        "children": [
          {
            "id": "subNode3-1",
            "side": "left",
            "text": "Подтема 3-1",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode3-1-1",
                "side": "left",
                "text": "Подтема 3-1-1",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode3-1-2",
                "side": "left",
                "text": "Подтема 3-1-2",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode3-1-3",
                "side": "left",
                "text": "Подтема 3-1-3",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
            ],
          }
        ],
      },
      {
        "id": "subNode4",
        "text": "Основная тема 4",
        "side": "right",
        "endpoints": [
          {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
          {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
        ],
        "children": [
          {
            "id": "subNode4-1",
            "side": "right",
            "text": "Подтема 4-1",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode4-1-1",
                "side": "right",
                "text": "Подтема 4-1-1",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode4-1-2",
                "side": "right",
                "text": "Подтема 4-1-2",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode4-1-3",
                "side": "right",
                "text": "Подтема 4-1-3",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode4-1-4",
                "side": "right",
                "text": "Подтема 4-1-4",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
            ],
          },
          {
            "id": "subNode4-2",
            "side": "right",
            "text": "Подтема 4-2",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
          {
            "id": "subNode4-3",
            "side": "right",
            "text": "Подтема 4-3",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
          {
            "id": "subNode4-4",
            "side": "right",
            "text": "Подтема 4-4",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
        ],
      },
      {
        "id": "subNode5",
        "side": "right",
        "text": "Основная тема 5",
        "endpoints": [
          {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
          {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
        ],
        "children": [
          {
            "id": "subNode5-1",
            "text": "Подтема 5-1",
            "side": "right",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
          },
          {
            "id": "subNode5-2",
            "text": "Подтема 5-2",
            "side": "right",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode5-2-1",
                "text": "Подтема 5-2-1",
                "side": "right",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode5-2-2",
                "text": "Подтема 5-2-2",
                "side": "right",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode5-2-3",
                "text": "Подтема 5-2-3",
                "side": "right",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
            ],
          },
          {
            "id": "subNode5-3",
            "text": "Подтема 5-3",
            "side": "right",
            "endpoints": [
              {"id": "left", "orientation": [-1, 0], "pos": [0, 0.5]},
              {"id": "right", "orientation": [1, 0], "pos": [0, 0.5]},
            ],
            "children": [
              {
                "id": "subNode5-3-1",
                "text": "Подтема 5-3-1",
                "side": "right",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
              {
                "id": "subNode5-3-2",
                "text": "Подтема 5-3-2",
                "side": "right",
                "endpoints": [
                  {
                    "id": "left",
                    "orientation": [-1, 0],
                    "pos": [0, 0.5],
                  },
                  {
                    "id": "right",
                    "orientation": [1, 0],
                    "pos": [0, 0.5],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
  "edges": [
    {
      "id": "0",
      "target": "right",
      "source": "left",
      "targetNode": "subNode1",
      "sourceNode": "Root",
      "type": "endpoint",
    },
    {
      "id": "1",
      "target": "right",
      "source": "left",
      "sourceNode": "Root",
      "targetNode": "subNode2",
      "type": "endpoint",
    },
    {
      "id": "2",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode2",
      "targetNode": "subNode2-1",
      "type": "endpoint",
    },
    {
      "id": "3",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode2",
      "targetNode": "subNode2-2",
      "type": "endpoint",
    },
    {
      "id": "4",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode2-3",
      "targetNode": "subNode2",
      "type": "endpoint",
    },
    {
      "id": "4",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode2-3",
      "targetNode": "subNode2-3-1",
      "type": "endpoint",
    },
    {
      "id": "4",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode2-1-1",
      "targetNode": "subNode2-1",
      "type": "endpoint",
    },
    {
      "id": "5",
      "target": "right",
      "source": "left",
      "sourceNode": "Root",
      "targetNode": "subNode3",
      "type": "endpoint",
    },
    {
      "id": "6",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode3-1",
      "targetNode": "subNode3",
      "type": "endpoint",
    },
    {
      "id": "7",
      "target": "left",
      "source": "right",
      "sourceNode": "Root",
      "targetNode": "subNode4",
      "type": "endpoint",
    },
    {
      "id": "8",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode4",
      "targetNode": "subNode4-1",
      "type": "endpoint",
    },
    {
      "id": "9",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-2",
      "targetNode": "subNode4",
      "type": "endpoint",
    },
    {
      "id": "10",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-3",
      "targetNode": "subNode4",
      "type": "endpoint",
    },
    {
      "id": "11",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-4",
      "targetNode": "subNode4",
      "type": "endpoint",
    },
    {
      "id": "12",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-1-1",
      "targetNode": "subNode4-1",
      "type": "endpoint",
    },
    {
      "id": "13",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-1-2",
      "targetNode": "subNode4-1",
      "type": "endpoint",
    },
    {
      "id": "14",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-1-3",
      "targetNode": "subNode4-1",
      "type": "endpoint",
    },
    {
      "id": "15",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode4-1-4",
      "targetNode": "subNode4-1",
      "type": "endpoint",
    },
    {
      "id": "16",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode1",
      "targetNode": "subNode1-1",
      "type": "endpoint",
    },
    {
      "id": "17",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode1",
      "targetNode": "subNode1-2",
      "type": "endpoint",
    },
    {
      "id": "18",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode1",
      "targetNode": "subNode1-3",
      "type": "endpoint",
    },
    {
      "id": "19",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode1-2",
      "targetNode": "subNode1-2-1",
      "type": "endpoint",
    },
    {
      "id": "20",
      "target": "left",
      "source": "right",
      "sourceNode": "Root",
      "targetNode": "subNode5",
      "type": "endpoint",
    },
    {
      "id": "21",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5",
      "targetNode": "subNode5-1",
      "type": "endpoint",
    },
    {
      "id": "22",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5",
      "targetNode": "subNode5-2",
      "type": "endpoint",
    },
    {
      "id": "23",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5",
      "targetNode": "subNode5-3",
      "type": "endpoint",
    },
    {
      "id": "24",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5-2",
      "targetNode": "subNode5-2-1",
      "type": "endpoint",
    },
    {
      "id": "25",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5-2",
      "targetNode": "subNode5-2-2",
      "type": "endpoint",
    },
    {
      "id": "26",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5-2",
      "targetNode": "subNode5-2-3",
      "type": "endpoint",
    },
    {
      "id": "27",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5-3",
      "targetNode": "subNode5-3-1",
      "type": "endpoint",
    },
    {
      "id": "28",
      "target": "left",
      "source": "right",
      "sourceNode": "subNode5-3",
      "targetNode": "subNode5-3-2",
      "type": "endpoint",
    },
    {
      "id": "29",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode3-1",
      "targetNode": "subNode3-1-1",
      "type": "endpoint",
    },
    {
      "id": "30",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode3-1",
      "targetNode": "subNode3-1-2",
      "type": "endpoint",
    },
    {
      "id": "31",
      "target": "right",
      "source": "left",
      "sourceNode": "subNode3",
      "targetNode": "subNode3-1-3",
      "type": "endpoint",
    },
  ],
}


def convert_nodes_to_elements(nodes):
  for node in nodes:
    yield {
        "id": node["id"],
        "text": node["text"],
        "side": node.get("side"),
    }

    if "children" in node:
      yield from convert_nodes_to_elements(node["children"])


def convert_edges(edges):
  for edge in edges:
    yield {
      "id": f"{edge['sourceNode']}_{edge['targetNode']}",
      "source": edge["sourceNode"],
      "target": edge["targetNode"]
    }


# print(list(convert_nodes_to_elements([data["nodes"]])) + list(convert_edges(data["edges"])))
print(list(convert_nodes_to_elements([data["nodes"]])))
print(list(convert_edges(data["edges"])))
